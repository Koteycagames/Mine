<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Настройки</title>
    <style>
        body { 
            margin: 0; 
            font-family: 'Courier New', monospace; 
            /* Обновленный фон для единства стиля */
            background: url('./textures/blocks/dirt.png'); 
            background-size: 128px;
            image-rendering: auto;
            
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            height: 100vh; 
            color: white; 
        }
        body::before { content: ""; position: absolute; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.85); z-index: -1; }
        
        h1 { font-size: 40px; margin-bottom: 30px; text-shadow: 2px 2px #000; }
        
        .container {
            background: rgba(0,0,0,0.5);
            padding: 30px;
            border: 2px solid #555;
            width: 400px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .row { 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            gap: 10px;
        }
        
        label { font-size: 18px; text-shadow: 1px 1px #000; }

        input[type=range] { width: 100%; cursor: pointer; }

        /* --- СТИЛЬНЫЙ MC-ТУМБЛЕР --- */
        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
            margin-top: 5px;
        }

        .switch input { opacity: 0; width: 0; height: 0; }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: #777; /* Серый (выкл) */
            border: 2px solid #333;
            transition: .2s;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .2s;
            box-shadow: 1px 1px 0 #000;
        }

        input:checked + .slider {
            background-color: #484; /* Зеленый (вкл) */
            border-color: #252;
        }

        input:checked + .slider:before {
            transform: translateX(30px);
        }

        /* Кнопка */
        .mc-btn { 
            width: 100%; 
            padding: 15px; 
            font-size: 20px; 
            color: #ddd; 
            background: #777; 
            border: 4px solid #555; 
            cursor: pointer; 
            text-shadow: 1px 1px #000;
        }
        .mc-btn:hover { background: #999; color: #fff; }

    </style>
</head>
<body>
    <h1>НАСТРОЙКИ</h1>
    
    <div class="container">
        <div class="row">
            <label>Чувствительность: <span id="sens-val" style="color:#ff0">0.5</span></label>
            <input type="range" min="0.1" max="2.0" step="0.1" value="0.5" id="sens">
        </div>

        <div class="row">
            <label>Дальность (чанки): <span id="dist-val" style="color:#ff0">60</span></label>
            <input type="range" min="20" max="150" step="10" value="60" id="dist">
        </div>

        <div class="row" style="flex-direction: row; justify-content: space-between; align-items: center; padding: 0 10px;">
            <label>PBR Текстуры (HD):</label>
            <label class="switch">
                <input type="checkbox" id="pbr-toggle">
                <span class="slider"></span>
            </label>
        </div>

        <button class="mc-btn" onclick="save()">ГОТОВО</button>
    </div>

    <script>
        // Загружаем настройки или ставим дефолтные
        const defaultConf = { sens: 0.5, dist: 60, pbr: false };
        const conf = JSON.parse(localStorage.getItem('mc_settings') || JSON.stringify(defaultConf));

        // Устанавливаем значения в UI
        const sensInput = document.getElementById('sens');
        const distInput = document.getElementById('dist');
        const pbrInput = document.getElementById('pbr-toggle');

        sensInput.value = conf.sens || 0.5;
        distInput.value = conf.dist || 60;
        pbrInput.checked = conf.pbr || false;

        document.getElementById('sens-val').innerText = sensInput.value;
        document.getElementById('dist-val').innerText = distInput.value;

        // Обновление цифр при движении ползунка
        sensInput.oninput = (e) => document.getElementById('sens-val').innerText = e.target.value;
        distInput.oninput = (e) => document.getElementById('dist-val').innerText = e.target.value;

        function save() {
            const newConf = {
                sens: parseFloat(sensInput.value),
                dist: parseInt(distInput.value),
                pbr: pbrInput.checked // Сохраняем состояние галочки
            };
            localStorage.setItem('mc_settings', JSON.stringify(newConf));
            window.location.href = 'index.html'; 
        }
    </script>
</body>
</html>
